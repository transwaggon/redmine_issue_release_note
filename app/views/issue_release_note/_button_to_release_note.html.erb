<% release_values = @issue.custom_field_values_by_reg(/(release)/i) %>
<% correct_count = (Setting.plugin_redmine_issue_release_note['rn_names_text'] || '').split('|').count + 1  %>

<% if release_values.count == correct_count %>
  <% values = release_values.map(&:value).compact.reject(&:empty?) %>
  <% if values.count == correct_count || force_button %>
    <%= button_to(t('download_release_note',
                    title: Setting.plugin_redmine_issue_release_note[:rn_title_singular].present? ?
                             Setting.plugin_redmine_issue_release_note[:rn_title_singular] :
                             l(:release_note)),
                  download_release_note_path(@issue, format: :pdf),
                  method: :get, disabled: values.count != correct_count) %>
  <% end %>
  <% if values.count != correct_count %>
    <%= t(missing_hint_i18n_key) %>
  <% end %>
<% end %>
